unity-scopes-api (0.5.0+14.04.20140220.1-0ubuntu2) UNRELEASED; urgency=medium

  [ Michi Henning ]
  * Re-factored proxy class implementation.

 -- Michi Henning <michi.henning@canonical.com>  Fri, 28 Feb 2014 08:22:14 +1000

unity-scopes-api (0.4.0+14.04.20140220.1-0ubuntu2) UNRELEASED; urgency=medium

  [ Pawel Stolowski, Michi Henning ]
  * Renamed various classes and methods in the public API
    (see RELEASE_NOTES.txt for details).

 -- Michi Henning <michi.henning@canonical.com>  Fri, 28 Feb 2014 08:22:14 +1000

unity-scopes-api (0.3.2+14.04.20140220.1-0ubuntu1) trusty; urgency=low

  [ Pawel Stolowski ]
  * Added ActivationResponse::set_hints method and marked setHints as deprecated.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Thu, 20 Feb 2014 15:08:03 +0000

unity-scopes-api (0.3.1+14.04.20140217-0ubuntu1) trusty; urgency=low

  [ Tarmac ]
  * Fix triggering of actions on previews from remote scopes.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Mon, 17 Feb 2014 12:40:37 +0000

unity-scopes-api (0.3.1+14.04.20140213.1-0ubuntu1) trusty; urgency=low

  [ Tarmac ]
  * Various fixes for communication with server scopes.

  [ Michal Hruby ]
  * Various fixes for communication with server scopes.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Thu, 13 Feb 2014 18:28:44 +0000

unity-scopes-api (0.3.1+14.04.20140211.2-0ubuntu1) trusty; urgency=low

  [ Pawel Stolowski ]
  * [ Pawel Stolowski ]
  * Added preliminary API for filters and departments.
  * Changes to preview action activation API: support for widget id.
  * Changes to Annotation API.
  * Return ScopeProxy from Result::target_scope_proxy (replaces activation_scope_name).

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Tue, 11 Feb 2014 17:55:05 +0000

unity-scopes-api (0.2.10-0ubuntu1) UNRELEASED; urgency=low

  [ Michi Henning ]
  * More default servant support.

  [ Pawel Stolowski ]
  * Additions to the PreviewWidget API.
  * Changed VariantMapBuilder to VariantBuilder, with a new API.
  * Added support for ColumnLayout.
  * Added SearchMetadata class.

 -- Pawel Stolowski <pawel.stolowski@ubuntu.com>  Fri, 31 Jan 2014 14:55:10 +0100

unity-scopes-api (0.2.8+14.04.20140131.1-0ubuntu1) trusty; urgency=low

  [ Michi Henning ]
  * More default servant support.

  [ Pawel Stolowski ]
  * Additions to the PreviewWidget API.
  * Changed VariantMapBuilder to VariantBuilder, with a new API.
  * Added support for ColumnLayout.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Fri, 31 Jan 2014 13:42:16 +0000

unity-scopes-api (0.2.6+14.04.20140128-0ubuntu1) trusty; urgency=low

  [ Michi Henning ]
  * More default servant support.
  * Removed 3.9-specific suppression directive that breaks valgrind
    3.8.x.
  * Added formatcode script to build/tools to make it easy to format
    individual source files.
  * Added support for remote scopes by querying the smart scopes proxy
    server. Registry.ini now has two new keys, SS.Registry.Identity and
    SS.Registry.Endpoint, which is where the smart scopes proxy server
    is expected to provide its registry object. If these keys are not
    set, the registry still runs, but prints a warning to say that
    remote scopes won't be available. Still missing: we don't have a
    refresh policy yet. The remote scopes are read only once, on start-
    up. If the smart scopes registry changes, the local registry
    currently will not notice this until it is re-started.
  * Added create_query_proxy() and create_query_ctrl_proxy() for the SS
    proxy server.

  [ Pawel Stolowski ]
  * Additions to the PreviewWidget API.
  * Define Result and CategorisedResult SPtr and SCPtr.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Tue, 28 Jan 2014 15:40:37 +0000

unity-scopes-api (0.2.4+14.04.20140124-0ubuntu1) trusty; urgency=low

  [ Michi Henning ]
  * Added ability for scope to push an exception (as an exception_ptr). On the client side,
    the exception is delivered as the what() string (if the exception is a std::exception) and
    as "unknown exception", otherwise.
  * Added abstract bases for all the *Object classes.
  * Remove redundant noexcept specifications from destructors.

  [ Jussi Pakkanen ]
  * Version bump due to namespace peeling.
  * Forward doxygen warnings into a file.

  [ Michal Hruby ]
  * Added preview and activation APIs.

  [ Michi Henning ]
  * Added default servants for Scope and QueryCtrl interfaces.

  [ Pawel Stolowski ]
  * Added set_category to CategorisedResult, removed Variant-based ctor.

  [ Marcus Tomlinson ]
  * Ensure that manager_ and reply_ objects are created and destroyed
    from within the same Qt thread. (LP: #1267917)
  * Added valgrind suppressions for memory leak false positives in Qt.
    (LP: #1262496)

  [ Ubuntu daily release ]
  * Automatic snapshot from revision 151

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Fri, 24 Jan 2014 10:03:35 +0000

unity-scopes-api (0.2.4-0ubuntu2) UNRELEASED; urgency=low

  [ Michi Henning ]
  * Added ability for scope to push an exception (as an exception_ptr). On the client side,
    the exception is delivered as the what() string (if the exception is a std::exception) and
    as "unknown exception", otherwise.

  [ Jussi Pakkanen ]
  * Version bump due to namespace peeling.

  [ Michal Hruby ]
  * Added preview and activation APIs.

  [ Michi Henning ]
  * Added default servants for Scope and QueryCtrl interfaces.

 -- Pawel Stolowski <pawel.stolowski@ubuntu.com>  Fri, 24 Jan 2014 14:19:02 +0100

unity-scopes-api (0.2.0+14.04.20140120-0ubuntu1) trusty; urgency=low

  [ Michi Henning ]
  * Added ability for scope to push an exception (as an exception_ptr). On the client side,
    the exception is delivered as the what() string (if the exception is a std::exception) and
    as "unknown exception", otherwise.
  * Disabled running the tests in parallel for CI. They are not written
    to run concurrently because the different tests try to bind to the
    same network endpoints. This should almost certainly fix the failure
    reported here:
    https://launchpadlibrarian.net/159997415/buildlog_ubuntu-saucy-
    i386.unity-scopes-api_0.1.5-0~94~ubuntu13.10.1_FAILEDTOBUILD.txt.gz.
  * Got rid of chatter from helgrind. (Needs helgrind 3.9.0 or later--
    3.8.1 generates bogus errors.) Added public destroy() method so it
    is possible to shut down the reaper explicitly. Fixed race condition
    on setting the self_ weak_ptr.
  * Changed code to match macro change here:
    https://code.launchpad.net/~michihenning/unity-api/noncopyable-
    fix/+merge/200084 Also removed remaining remnants of deprecated
    NonCopyable class.
  * Added CMake option to build with -fsanitize=thread. Fixed a bunch of
    warnings when building with clang.
  * Fixed valgrind error in HttpClient_test.cpp: execv was using
    deallocated memory. Updated CTestCustom.cmake.in to correctly
    suppress the tests that should not be run under valgrind.
  * Fixed shutdown in ObjectAdapter and added proper exception handling
    if the broker thread or a worker thread encounters an exception.
  * Disabled code generation for stand-alone header compilation tests.
    This makes the tests run marginally faster.
  * Added locate() remote method to the Registry, for the scope
    activation logic.
  * Changed ScopeLoader to not run the scope in a separate thread. (This
    is done by scoperunner anyway.) This fixes the problem of an
    exception being thrown by start(), but the scoperunner not realizing
    this. (LP: #1262536)
  * Added suppressions file for thread sanitizer issues in zmq.
  * Fixed race on registry start-up: registry was answering incoming
    requests too early. Other minor cosmetic changes: replaced
    factory()->create() call with factory()->find() because RuntimeImpl
    already instantiates the middleware. Removed redundant #includes.
    (LP: #1267026)
  * Minor fix: got rid of unnecessary unique_ptr. No functional changes.
  * Added formatcode target to CMakeLists.txt. This runs all source and
    header files through a pretty-printer.
  * Updated code for API changes in latest Cap'n Proto. (LP: #1268538)
  * Added check to prevent two servers from binding to the same ipc
    endpoint. Added coverage test for double-bind. Removed attempts to
    deal with servant destructors that throw. It turns out that this
    doesn't work because the destructor is called in the context of the
    map destructor, which calls the shared_ptr destructors, so we end up
    in terminate(). I might theoretically be possible to do this with a
    custom deleter for the map and the shared_ptrs inside the map, but
    the trouble isn't worth it. Destructors should never throw, that's
    just how it is, and attempts to patch around that are a lost labor
    of love. (LP: #1257676)
  * Fix to stop SignalThread from spinning if waitpid() is called at a
    point where there are no child processes. (LP: #1268524)
  * Fixes a bunch of include guards that used the wrong symbol name.
  * Added ping() method to all proxies.

  [ Jussi Pakkanen ]
  * Version bump due to namespace peeling.
  * Use EXPECT_FALSE.
  * Use built-in CMake machinery for libdir rather than building paths
    yourself.
  * Remove extra namespace layers.
  * Fix -Werror.
  * Fix header include path.
  * Make it possible to not run headertests, which are slow.
  * Create empty directory where scopes can install their configuration
    files.
  * Implement Registry.
  * Some logging to RegistryObject.

  [ Michal Hruby ]
  * Added preview and activation APIs.
  * Don't fork inside tests, as it screws up with coverage reports.
  * Update tutorial to match with the current public API.

  [ Marcus Tomlinson ]
  * Fixed race conditions in HttpClientQtThread and RaiiServer. (LP:
    #1262987)
  * reply_->abort() (QCoreApplication::sendEvent) replaced by a signal-
    slot connection (QCoreApplication::postEvent), which is allowed
    across threads. (LP: #1267917)
  * Added astyle flag to suppress the creation of .orig files when
    formatting code.

  [ Ubuntu daily release ]
  * Automatic snapshot from revision 142

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Mon, 20 Jan 2014 16:05:56 +0000

unity-scopes-api (0.1.6+14.04.20131219.1-0ubuntu1) trusty; urgency=low

  [ Pawel Stolowski ]
  * Added support for [] operator to the Result class, other minor changes to Result API.
  * Remove factory_configfile() API as well as the need to define it in
    the configuration files.
  * Made title / art optional in Result / CategorisedResult. Report
    uncaught exceptions from ScopeBase::run() to stderr. (LP: #1259963)

  [ Michal Hruby ]
  * Bump version requirements.
  * Loosen the version req so it works fine with PPAs.

  [ Jussi Pakkanen ]
  * Find libraries instead of using them blindly.
  * Fix use of uninitialised variable.
  * Use lowercased build type.
  * Use the macro version of noncopyable.
  * Made compile tests work when CCache is in use.
  * Detect jsoncpp with pkg-config.

  [ Marcus Tomlinson ]
  * Removed unity/api directories in test tree. (LP: #1249896)
  * Introduced Smart Scopes client functionality.
  * Fixed timing issue in cancel_get test.
  * Mock python servers now scan for an available port on localhost then
    return that port to the associated test process.

  [ Michi Henning ]
  * Fixed typo in CMakeLists.txt error message.
  * Made changes required by new API for exceptions in unity-api:
    https://code.launchpad.net/~michihenning/unity-api/what-
    fix/+merge/198871.
  * Changed CXX flags to not abort the build in release mode when there
    is a deprecation warning.
  * Add notes on now the client- and server-side invocation and dispatch
    are implemented. (LP: #1260253)

  [ Ubuntu daily release ]
  * Automatic snapshot from revision 106

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Thu, 19 Dec 2013 21:08:02 +0000

unity-scopes-api (0.1.4-0ubuntu2) UNRELEASED; urgency=low

  [ Michal Hruby ]
  * Bump version because of the ResultItem rename.

  [ Pawel Stolowski ]
  * Added API for annotations.
  * Added Result::metadata() getter. Create null Variant with default ctor.

 -- Pawel Stolowski <pawel.stolowski@ubuntu.com>  Mon, 09 Dec 2013 19:15:03 +0100

unity-scopes-api (0.1.3+14.04.20131211-0ubuntu1) trusty; urgency=low

  [ Michal Hruby ]
  * Bump version because of the ResultItem rename.

  [ Pawel Stolowski ]
  * Added Result::metadata() getter. Create null Variant with default ctor.
  * Introduced a base Result class which carries base result attributes
    and CategorisedResult class that carries Result + a category and
    replaces existing ResultItem class. Provide methods to store a
    Result inside a Result. Changed the internal structure of serialized
    Result to use "attrs" and "internal" dicts inside the outer dict.

  [ Michi Henning ]
  * This fixes a race condition that could cause the thread pool
    accessor on the middleware to return nullptr.

  [ James Henstridge ]
  * Add a simple API to launch a scope without going through the dlopen
    based scope runner for the benefit of language bindings.

  [ Ubuntu daily release ]
  * Automatic snapshot from revision 84

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Wed, 11 Dec 2013 10:49:54 +0000

unity-scopes-api (0.1.1+14.04.20131204-0ubuntu1) trusty; urgency=low

  [ Michal Hruby ]
  * Prepare for PPA release
  * Added upstart job for the scope registry.

  [ Pawel Stolowski ]
  * Added CategoryRenderer class that encapsulates a json string with
    actual category template.

  [ Jussi Pakkanen ]
  * Make the option for -Werror apply to plain C too.

  [ Michi Henning ]
  * Added scope metadata to config and registry. Optional fields that
    are not set throw on an attempt to access them. This allows us to
    distinguish "not set all" from "set to default value". Simplified
    configuration. Factory.ini no longer exists. Client can now run
    without Runtime.ini, but still needs Registry.ini and Zmq.ini. (It
    looks for those in the current directory.) Will fix this next.
    Various minor clean-up in tests and doc comments.
  * Made it optional for client to specify a name, so multiple clients
    can run concurrently without stepping on each other. Removed no-
    longer-needed source file I should have removed in previous commit.

  [ Ubuntu daily release ]
  * Automatic snapshot from revision 78

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Wed, 04 Dec 2013 17:37:08 +0000

unity-scopes-api (0.1+14.04.20131127-0ubuntu1) trusty; urgency=low

  [ Michi Henning ]
  * Initial release
  * Improved notes in INSTALL file.
  * Fixed scoperegistry to use new scoperunner and to figure out which
    scopes to run from config files. Still to do: deal with overrides
    and OEM scopes, particularly the grouping aspect. SignalThread needs
    to invoke a callback for clean shut-down on receipt of SIGINT.
  * Added reason for why a call to finished() is made (finished,
    cancelled, or error). Fixed incorrect return value from push() after
    cancellation. Lots of doc fixes and other minor tidy-up.
  * Made proxies properly polymorphic, so they derived from a common
    base and no longer redudantly store the pimpl and the MWProxy at
    each level of the hierarchy.

  [ Łukasz 'sil2100' Zemczak ]
  * Automatic snapshot from revision 52 (bootstrap)
  * Format should be 1.0, not sure why I switched it invalidly
  * Re-copyright sources to fit the LGPL-3 license. It's good to have
    all sources in one license to avoid confusion - and I guess LGPL-3
    was supposed to be the main one. Also, I guess Lzmqnse is a typo of
    License, yes?.

  [ Michal Hruby ]
  * Added requires for libunity-api to the pc file, so that linking
    works properly when using unity exceptions.

  [ Pawel Stolowski ]
  * Implemented support for categories. Added double and array support
    to the Variant class.
  * Added support for null Variant.
  * Renamed ReplyBase to ReceiverBase. Pass ResultItem by value to
    ReceiverBase::push.
  * First cut at scopes tutorial. Moved move ctor and move assignment
    operator of ResultItem from the header file to .cpp to avoid ABI
    issues in the future. Renamed 'icon' to 'art' in ResultItem.
  * Added category setter to ResultItem.

  [ Jussi Pakkanen ]
  * Merged capnp fixes.
  * Quote quotes.
  * Use unique_ptrs for holding impl objects instead of shared_ptrs
    where possible.
  * Clang usability fixes.

  [ Ubuntu daily release ]
  * Automatic snapshot from revision 71

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Wed, 27 Nov 2013 12:03:03 +0000
